{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/justinsasek/Code/TPEO/full-stack-learning-repo-2022/Week_9/homework frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { isFormList } from '../form-list/form-list.js';\nimport { filterErrors } from '../filter-errors/filter-errors.js';\nimport { validateListValues } from './validate-list-values.js';\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return a;\n};\nfunction validateRecordRules(rules, values) {\n  return Object.keys(rules).reduce(function (acc, key) {\n    var rule = rules[key];\n    if (isFormList(values[key])) {\n      return __spreadValues(__spreadValues({}, acc), validateListValues(values, key, rules));\n    }\n    if (typeof rule === \"function\") {\n      acc[key] = rule(values[key], values);\n    }\n    return acc;\n  }, {});\n}\nfunction getValidationResults(errors) {\n  var filteredErrors = filterErrors(errors);\n  return {\n    hasErrors: Object.keys(filteredErrors).length > 0,\n    errors: filteredErrors\n  };\n}\nfunction validateValues(rules, values) {\n  if (rules === void 0 || rules === null) {\n    return {\n      hasErrors: false,\n      errors: {}\n    };\n  }\n  if (typeof rules === \"function\") {\n    return getValidationResults(rules(values));\n  }\n  return getValidationResults(validateRecordRules(rules, values));\n}\nfunction validateFieldValue(field, rules, values) {\n  var results = validateValues(rules, values);\n  var hasError = (field in results.errors);\n  return {\n    hasError: hasError,\n    error: hasError ? results.errors[field] : null\n  };\n}\nexport { validateFieldValue, validateValues };","map":{"version":3,"mappings":"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","names":["__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","validateRecordRules","rules","values","keys","reduce","acc","rule","isFormList","validateListValues","getValidationResults","errors","filteredErrors","filterErrors","hasErrors","length","validateValues","validateFieldValue","field","results","hasError","error"],"sources":["../../src/validate-values/validate-values.ts"],"sourcesContent":["import type {\n  FormErrors,\n  FormRulesRecord,\n  FormRules,\n  FormValidationResult,\n  FormFieldValidationResult,\n} from '../types';\nimport { isFormList } from '../form-list/form-list';\nimport { filterErrors } from '../filter-errors/filter-errors';\nimport { validateListValues } from './validate-list-values';\n\nfunction validateRecordRules(rules: FormRulesRecord<any>, values: Record<string, any>): FormErrors {\n  return Object.keys(rules).reduce<FormErrors>((acc, key) => {\n    const rule = rules[key];\n\n    if (isFormList(values[key])) {\n      return { ...acc, ...validateListValues(values, key, rules) };\n    }\n\n    if (typeof rule === 'function') {\n      acc[key] = rule(values[key], values);\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction getValidationResults(errors: FormErrors) {\n  const filteredErrors = filterErrors(errors);\n  return { hasErrors: Object.keys(filteredErrors).length > 0, errors: filteredErrors };\n}\n\nexport function validateValues(\n  rules: FormRules<any>,\n  values: Record<string, any>\n): FormValidationResult {\n  if (rules === undefined || rules === null) {\n    return { hasErrors: false, errors: {} };\n  }\n\n  if (typeof rules === 'function') {\n    return getValidationResults(rules(values));\n  }\n\n  return getValidationResults(validateRecordRules(rules, values));\n}\n\nexport function validateFieldValue(\n  field: string,\n  rules: FormRules<any>,\n  values: Record<string, any>\n): FormFieldValidationResult {\n  const results = validateValues(rules, values);\n  const hasError = field in results.errors;\n  return { hasError, error: hasError ? results.errors[field] : null };\n}\n"]},"metadata":{},"sourceType":"module"}